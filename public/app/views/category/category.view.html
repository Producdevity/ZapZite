<h4>Categories</h4>

<div class="row">
	<div class="col s6">
		<div class="row">
			<div class="col s12">
				<ul class="collection with-header">
					<li class="collection-header"><h5>Categories</h5></li>
					<loading-spinner data="vm.categories.$resolved"></loading-spinner>
					<li class="collection-item" ng-repeat="category in vm.categories">
						<div>{{ category.name }}
							<a class="secondary-content">
								<i class="material-icons" ng-click="vm.selectCategory(category)">edit</i>
								<i class="material-icons" data-target="deleteCategory" ng-click="vm.deleteCategoryBox(category)">delete_forever</i>
							</a>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<div class="col s6">
		<div class="row">
			<div class="col s12">
				<form ng-submit="vm.addCategory()">
					<div class="input-field inline">
						<input id="category" type="text" class="validate" ng-model="vm.newCategory.name">
						<label for="category">Category name</label>
					</div>
					<button class="waves-effect waves-light btn" type="submit"
					        ng-disabled="!vm.newCategory.name"><i
							class="material-icons">add</i></button>
				</form>
			</div>
		</div>
		<div class="row">
			<div class="col s12">
				<div class="card blue-grey darken-1" ng-if="vm.selectedCategory">
					<div class="card-content">
					<span class="card-title activator grey-text text-darken-4">Edit: {{ vm.oldCategory.name }}<i
							class="material-icons right">more_vert</i></span>
						<div class="input-field">
							<input id="edit-category" type="text" class="validate"
							       ng-model="vm.selectedCategory.name">
							<label for="edit-category"></label>
						</div>
					</div>
					<div class="card-action">
						<a ng-click="vm.cancelEditing()">CANCEL</a>
						<a ng-click="vm.updateCategory()">UPDATE</a>
					</div>
					<div class="card-reveal">
					<span class="card-title grey-text text-darken-4">Card Title<i
							class="material-icons right">close</i></span>
						<p>Here is some more information about this category or some explanation that is only
							revealed once clicked on.</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Modal Structure -->
<div id="deleteCategory" class="modal">
	<div class="modal-content">
		<h4>Are you sure you want to delete this item?</h4>
		<p> {{ vm.deleteSelectedCategory.name }}</p>
	</div>
	<div class="modal-footer">
		<a class="modal-action modal-close waves-effect waves-green btn-flat" ng-click="vm.deleteCategory(vm.deleteSelectedCategory)">Delete</a>
		<a class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
	</div>
</div>

<script>
	$(document).ready(function() {
		$('.modal').modal();
		$('.tooltipped').tooltip({delay: 50});
	});
</script>